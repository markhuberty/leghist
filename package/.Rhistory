getwd()
print("blah")
Sys.env
Sys.env()
Sys.getenv
Sys.getenv()
sink("test.log")
cat(Sys.getenv())
sink()
sink("test.log")
cat(options())
options()
a = unlist(options())
cat(a)
type(a)
class(a)
length(a)
sink()
sink()
print("blah")
sink("logfile")
print("blah")
sink()
print("blah")
sink.number()
sink("logfile")
sink.number()
sink()
sink("logfile")
if(sink.number > 0) sink()
sink()
sink.number()
sink.number() > 0
sink("logfile")
if(sink.number() > 0) sink()
print("blah")
sink()
print("blah")
?PlotAmendsSuccess
?PlotCommitteeTopics
rm(list=ls())
rese.topics.2007$terms
rese.topics.2007$models$model.primary$terms
names(rese.topic.proportions.2007)
rese.topic.proportions.2007$tab.primary
ls()
names(rese.topics.2007)
names(rese.topics.2007$models)
names(rese.topics.2007$models$model.primary)
names(rese.topics.2007$models$model.primary$topic.model)
rese.topics.2007$models$model.primary$topic.model
summary(rese.topics.2007$models$model.primary$topic.model)
dim(rese.topics.2007$models$model.primary$topic.model@beta)
hclust(dist(rese.topics.2007$models$model.primary$topic.model@beta))
a <- hclust(dist(rese.topics.2007$models$model.primary$topic.model@beta))
plot(a)
rese.topics.2007$terms
length(rese.topics.2007$models$model.secondary)
test <- unlist(rese.topics.2007$models$model.secondary)
dim(test)
class(test)
length(test)
library(foreach)
dim(secondary.betas)
class(secondary.betas)
a <- rese.topics.2007$models$model.secondary[[1]]
dim(a)
dim(secondary.betas)
class(secondary.betas)
rese.topics.2007$models$model.secondary[[1]]$topic.model@beta
dim(secondary.betas)
a <- hclust(dist(secondary.betas))
plot(a)
rese.topics.2007$terms
ls()
names(doc.list.2007)
names(doc.list.2007)
library(topicmodels)
class(newdata)
class(bill.model$topic.model)
names(bill.model$topic.model)
posterior
showMethods("posterior")
perplexity(bill.model$topic.model)
?perplexity
posterior(bill.model$topic.model)
class(newdata)
posterior(bill.model$topic.model, newdata=newdata)
dim(my.newdata)
length(rm.addl)
rm.addl
rm.addl
test <- colSums(my.newdata)
class(my.newdata)
test <- apply(my.newdata, 2, sum)
length(test)
sum(test > 0)
dim(doc.list.2007$vs.out)
dim(bill.model$topic.model$beta)
dim(bill.model$topic.model@beta)
bill.model$topic.model@wordassignments
bill.model$topic.model@terms
class(bill.model$topic.model@terms)
)
dim(my.newdata)
class(my.newdata)
names(all.model)
dim(this.data)
dropped.idx <- (1:nrow(this.data))[-dtm.idx]
dropped.idx <- (1:nrow(this.data))[-all.modeldtm.idx]
dropped.idx <- (1:nrow(this.data))[-all.model$dtm.idx]
length(dropped.idx
)
table(c(labels, committees.2007)[dropped.idx])
c(labels, committees.2007)[dropped.idx]
labels
c(labels, committees.2007)[dropped.idx]
table(c(labels, committees.2007)[dropped.idx])
dropped.df <- data.frame(c(labels, committees.2007)[dropped.idx], dropped.idx)
dropped.df
bill.final.2007[dropped.df[,2][dropped.df[,1]=="final"]]
ep.first.2007$text[dropped.df[,2][dropped.df[,1]=="Parliament 1st reading"]][1:10]
table(c(labels, committees.2007)[dropped.idx])
rowSums(doc.list.2007$vs.out[dropped.idx,])
library(Matrix)
rowSums(doc.list.2007$vs.out[dropped.idx,])
rese.composite.2007.cos[1:10,1:3]
warnings()
warnings()
test[[2]]
t(test[[2]])
t(test[[1]])
test[[2]]
composite <- rese.composite.2007.cos
topic.model <- all.model
doc.list <- doc.list.2007
dropped.final
composite$match.origin[1:10]
all.sources[1:10]
dropped.final
length(dropped.final)
length(dropped.initial)
dropped.initial
all.sources
composite$match.idx[composite$match.origin=="doc.initial"]
length(dropped.amend)
idx <- topic.model$dtm.idx[all.sources == "amendment"]
idx
idx <- idx - length(doc.list$idx.final) - length(doc.list$idx.initial)
length(idx)
length(committees.2007)
composite$match.idx[composite$match.origin=="amendment"] %in% idx
rowSums(table(df$committee, df$topic))
rowSums(tab.3d)
length(tab.3d)
tab.3d
names(tab.3d)
length(committees.2007)
1290-1168
122+15
table(rese.composite.2007$match.origin)
table(rese.composite.2007.cos$match.origin)
tab.3d
tab.3d
table(rese.composite.2007.cos$match.origin)
rownames(tab.3d)
class(test)
dim(test)
names(test)
names(test)
test.impact
pct.contrib
test.impact
length(test.impact)
length(test.impact)
test.impact
names(test)
table(test$source[test$source=="final"], test$topic[test$source=="final"])
test
tab.3d
committees[1:10]
labels[1:10]
com <- c(labels, committees.2007)[all.model$dtm.idx]
table(com[com=="final"], test$topic[test$source=="final"])
length(com)
dim(test)
sum(com == "final"]
sum(com == "final")
table(test$source, test$topic)
test.impact
table(test$source, test$topic)
table(test$source, test$topic)[2,]
blah.final <- table(test$source, test$topic)[2,]
8/17
test.impact/blah.final
test.impact[[1]]/blah.final
colSums(test.impact[[1]]/blah.final)
test.impact[[2]]
colSums(test.impact[[2]])
class(test)
rowSums(table(test$source, test$topic)
)
rowSums(table(test$source[test$status=="acc"], test$topic[test$status="acc"])
rowSums(table(test$source[test$status=="acc"], test$topic[test$status=="acc"])
)
test.impact[[3]]
rowSums(test.impact[[3]])
test.impact[[1]]
tab.3d
test.impact
rownames(test[[3]]) == "doc.final"
rownames(test[[3]])
class(test[[3]])
test[[3]]
class(test.impact[[3]])
rownames(test.impact[[3]]) == "doc.final"
test.impact[[3]][rownames(test.impact[[3]]) == "doc.final",]
test.impact[[1]]
test.impact[[2]]
idx.out <- test
new.contrib
new.contrib
test[1:10,]
test.impact
names(idx.out)
summary(idx.out$source)
summary(idx.out$source)
test.impact
colSums(test.impact[[2]])
test.impact[[1]] / test.impact[[3]]
test.impact[[1]][,test.impact[[4]] / test.impact[[3]]
]
test.impact[[1]][,test.impact[[4]]] / test.impact[[3]]
length(test.impact)
test.impact[[1]][,test.impact[[4]]] / test.impact[[3]]
new.contrib
test.impact[[1]][,new.contrib]
test.impact[[3]]
new.contrib
length(test.impact[[3]]
)
length(test.impact[[4]])
rm(new.contrib)
test.impact[[4]]
test.impact[[1]]
test.impact[[1]][,new.contrib]
test.impact[[1]][,test.impact[[4]]]
test.impact[[1]][,test.impact[[4]]] / test.impact[[3]]
test.impact[[3]]
test.impact
colSums(test.impact[[2]])
18/14
all.model$terms[,18]
all.model$terms[,10]
all.model$terms[,2]
all.model$terms[,3]
all.model$terms[,9]
all.model$terms[,5]
names(all.model)
all.model$topics
length(all.model$topics)
?table
tab.3d
test.impact
rowSums(test.impact[[2]])
colSums(test.impact[[2]])
tab.3d
tab.3d
test
test[is.na(test$topic),]
tab.3d
table
?table
tab.3d
names(test)
tab.3d
dim(test)
idx.out <- test
new.contrib
dim(tab.overall)
tab.overall
tab.overall
new.contrib
tab.overall[rownames(tab.overall)=="doc.final"]
tab.overall[rownames(tab.overall)=="doc.final",]
tab.overall[rownames(tab.overall)=="doc.final" & !is.na(rownames(tab.overall),]
tab.overall[rownames(tab.overall)=="doc.final" & !is.na(rownames(tab.overall)),]
new.contrib
rm(new.contrib)
tab.overall
new.contrib
final.totals
pct.contrib
rowSums(pct.contrib, na.rm=TRUE)
colSums(pct.contrib, na.rm=TRUE)
tab.idx
tab.overall
names(test)
names(composite)
test$source[1:10]
warnings
warnings()
table(test[[2]]$final.topic, test[[2]]$match.topic)
table(test[[2]]$final.topic, test[[2]]$match.topic, useNA="always")
table(test[[2]]$final.topic, test[[2]]$match.origin, test[[2]]$match.topic, useNA="always")
table(test[[2]]$final.topic, test[[2]]$match.topic, test[[2]]$match.origin, useNA="always")
idx.out <- test[[1]]
test.impact
table(test[[2]]$final.topic[test[[2]]$final.topic %in% c(10, 6, 8)],
  test[[2]]$match.topic[test[[2]]$final.topic %in% c(10, 6, 8)])
table(test[[2]]$final.topic[test[[2]]$final.topic %in% c(10, 6, 8)],
  test[[2]]$match.topic[test[[2]]$final.topic %in% c(10, 6, 8)], useNA="always")
table(test[[2]]$final.topic[test[[2]]$final.topic %in% c(10, 6, 8, NA)],
  test[[2]]$match.topic[test[[2]]$final.topic %in% c(10, 6, 8, NA)], useNA="always")
table(test[[2]]$final.topic[test[[2]]$final.topic %in% c(10, 6, 8, NA)],
  test[[2]]$match.topic[test[[2]]$final.topic %in% c(10, 6, 8, NA)],
  test[[2]]$match.origin[test[[2]]$final.topic %in% c(10, 6, 8, NA)],useNA="always")
names(test[[1]])
sum(test[[1]]$status=="acc")
sum(test[[1]]$source=="final")
sum(test[[1]]$source=="doc.final")
tab.3d
sum(test[[1]]$source=="doc.final")
names(test[[2]])
test.impact
rm(new.contrib, tab.idx, pct.contrib)
test.impact
test.impact
drop.levels
test.impact
 colnames(test.impact[[2]])
test.impact
colSums(test.impact[[3]])
test.impact
all.model$terms[,11]
all.model$terms[,15]
all.model$terms[,17]
all.model$terms[test.impact[[5]]]
all.model$terms[,test.impact[[5]]]
all.model$terms
rowSums(test.impact[[1]])
k.values
perplexity(all.model$topic.model)
which.min
all.perplex
plot(all.perplex ~ k.values)
library(Matrix)
dim(train.data)
dim(test.data)
test.perplex <- perplexity(all.model$topic.model)
test.perplex <- perplexity(all.model$topic.model, newdata=SparseToDtm(test.data))
k.values
library(Matrix) <- 
f
library(Matrix)
all.perplex
plot(all.perplex[1,] ~ k.values)
all.model$terms
all.perplex
all.model$topic.model@alpha
perplexity(all.model$topic.model)
logLik(all.model$topic.model)
sapply(all.perplex, function(x) x$topic.model@alpha)
sapply(all.perplex, function(x) x[[1]]$topic.model@alpha)
class(all.perplex[[1]][[1]])
sapply(all.perplex, function(x) x[[1]]$topic.model)
class(all.perlex[[1]])
class(all.perplex[[1]])
length(all.perplex)
class(all.perplex[[2]])
all.perplex
sapply(all.perplex[1,], function(x) x[[1]]$topic.model@alpha)
all.perplex[1,1]
sapply(all.perplex[1,], function(x) x@alpha)
names(all.perplex[1,1])
class(all.perplex[1,1])
class(all.perplex[1,1][[1]])
class(all.perplex[1,1]$topic.model)
names(all.perplex[1,1])
names(all.perplex[1,1][[1]])
sapply(all.perplex[1,], function(x) x[[1]]$topic.model@alpha)
all.perplex[1,1][[1]]$topic.model
sapply(all.perplex[1,], function(x) x[[1]][[1]]@alpha)
sapply(all.perplex[1,], function(x) x@alpha)
all.perplex[1,1][[1]]$topic.model@alpha
all.perplex[1,1][[4]]$topic.model@alpha
all.perplex[1,2][[1]]$topic.model@alpha
all.perplex[1,3][[1]]$topic.model@alpha
all.perplex[1,3][[1]]$topic.model@gamma
all.perplex[1,3][[1]]$topic.model@gamma[234,]
all.perplex[2,]
all.perplex[1,1][[1]]$terms
table(all.perplex[1,1][[1]]$topics)
table(all.perplex[1,4][[1]]$topics)
table(all.perplex[1,5][[1]]$topics)
all.perplex[1,6][[1]]$terms
all.perplex[1,5][[1]]$terms
2
n
dim(this.data)
library(Matrix)
all.perplex[[2]]
sapply(all.perplex, function(x) x[[2]]
)
dim(train.data)
length(sample.vec)
SparseToDtm
rowSums(test.data) > 0
sapply(all.perplex, function(x) x[[3]])
sapply(all.perplex, function(x) x[[4]])
all.perplex[[9]][[1]]$terms
dim(test)
class(test)
names(test)
length(test)
names(test[[2]])
test[[2]][,7:8]
rowSums(this.data) > 0
sum(rowSums(this.data) == 0)
names(test)
length(test)
test[[2]][,7:8]
idx.out <- test
names(idx.out)
table(idx.out$source, idx.out$topic)
idx.out$source
idx.out$topic
class(test[[1]])
summary(test[[1]])
class(test[[1]][,1])
test[[1]][,1]
foreach
library(foreach)
summary(test[[1]])
class(test[[1]])
dim(test[[1]])
get.idx
names(test[[1]])
dim(test[[1]])
test[[1]][,5]
test[[1]][1292,]
test[[1]][1388,]
test[[1]][1685,]
summary(test[[1]])
test[[1]][1500,]
test[[1]][1700,]
dim(doc.list.2007)
class(doc.list.2007)
dim(doc.list.2007$vs.out)
length(c(labels, committees.2007)0
length(c(labels, committees.2007))
names(test[[1]])
test.impact
this.model$terms
class(this.model)
all.model$terms[,test.impact[[5]]]
tapply(rese.composite.2007.cos$match.dist,
  rese.composite.2007$alt.origin, mean)
tapply(rese.composite.2007.cos$match.dist,
  rese.composite.2007.cos$alt.origin, mean)
tapply(rese.composite.2007.cos$match.dist,
  rese.composite.2007.cos$alt.origin, sd)
tapply(rese.composite.2007.cos$match.dist,
  rese.composite.2007.cos$alt.origin, quantile)
tapply(rese.composite.2007.cos$match.dist,
  rese.composite.2007.cos$alt.origin, quantile, na.rm=TRUE)
plot(density(rese.composite.2007.cos$match.dist[rese.composite.2007.cos$alt.origin="Commission"]))
plot(density(rese.composite.2007.cos$match.dist[rese.composite.2007.cos$alt.origin=="Commission"]))
  lines(density(rese.composite.2007.cos$match.dist[rese.composite.2007.cos$alt.origin=="Parliament
>1st reading"]))
    lines(density(rese.composite.2007.cos$match.dist[rese.composite.2007.cos$alt.origin=="Parliament 1st reading"]))
plot(density(rese.composite.2007.cos$match.dist[rese.composite.2007.cos$alt.origin=="Commission"]))
      lines(density(rese.composite.2007.cos$match.dist[rese.composite.2007.cos$alt.origin=="Parliament 1st reading"]), col="red")
table(rese.composite.2007.cos$alt.origin,
  cut(rese.composite.2007.cos$match.dist, quantile(rese.composite.2007.cos$match.dist)))
table(rese.composite.2007.cos$alt.origin,
  cut(rese.composite.2007.cos$match.dist,
  quantile(rese.composite.2007.cos$match.dist, na.rm=TRUE)))
prop.table(table(rese.composite.2007.cos$alt.origin,
  cut(rese.composite.2007.cos$match.dist,
  quantile(rese.composite.2007.cos$match.dist, na.rm=TRUE))))
prop.table(table(rese.composite.2007.cos$alt.origin,
  cut(rese.composite.2007.cos$match.dist,
  quantile(rese.composite.2007.cos$match.dist, na.rm=TRUE))), margin=1)
prop.table(table(rese.composite.2007.cos$alt.origin,
  cut(rese.composite.2007.cos$match.dist,
  quantile(rese.composite.2007.cos$match.dist, na.rm=TRUE))), margin=2)
test.impact[[6]]
test.impact[[6]]
test.impact[[6]]
quantile(rese.composite.2007.cos$match.dist,
probs=c(0,1, 1))
test.impact[[6]]
all.perplex[[2]]
sapply(all.perplex, function(x) x[[3]])
sapply(all.perplex, function(x) x[[4]])
names(mtc)
idx.out <- mtc
tab.overall
final.totals
tab.dist
 names(mtc)
names(mtc)
impact
impact
impact$ctab.final.topic
impact$ctab.origin.topic
impact$prop.origin.topic
impact$prop.origin.topic
impact$quantile.origin.dit
impact$quantile.origin.dist
impact
impact
quit()
n
